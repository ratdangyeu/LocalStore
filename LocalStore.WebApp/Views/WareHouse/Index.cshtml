@using LocalStore.WebApp.Models

<div id="jsGrid"></div>

@section scripts
{
    <script>        
        toastr.options = {
            "positionClass": "toast-bottom-center"
        };

        $(function () {
            $("#jsGrid").jsGrid({
                width: "100%",
                height: "550px",

                inserting: true,
                editing: true,
                filtering: true,
                autoload: true,
                sorting: true,
                paging: true,
                pageLoading: true,

                controller: {
                    loadData: function (filter) {
                        return $.ajax({
                            type: "GET",
                            url: '@Url.Action("LoadData")',
                            data: filter,
                            contentType: "application/json",
                            dataType: "json"
                        });
                    },

                    insertItem: function (item) {
                        return $.ajax({
                            type: "POST",
                            url: '@Url.Action("InsertData")',
                            data: item,
                            dataType: "text"
                        }).done(function (msg) {
                            toastr.info(msg);
                            $('#jsGrid').jsGrid('loadData');
                        });
                    },

                    updateItem: function (item) {
                        return $.ajax({
                            type: "GET",
                            url: '/WareHouse/UpdateData/' + item.Id,
                            data: item,
                            dataType: "json"
                        }).done(function (msg) {
                            toastr.info(msg);
                            $('#jsGrid').jsGrid('loadData');
                        });
                    },

                    deleteItem: function (item) {
                        return $.ajax({
                            type: "GET",
                            url: '/WareHouse/DeleteData/' + item.Id,
                            dataType: "json"
                        }).done(function (msg) {
                            toastr.info(msg);
                            $('#jsGrid').jsGrid('loadData');
                        });
                    }
                },

                fields: [
                    {
                        name: "Code", title: "Mã kho", type: "text", width: 150, validate: [
                            { validator: "required", message: '@CommonString.WareHouseCodeRequired' },
                            { validator: "maxLength", message: '@string.Format(CommonString.WareHouseCodeLength, 255)', param: 255 }
                        ]
                    },
                    {
                        name: "Name", title: "Tên kho", type: "text", width: 150, validate: [
                            { validator: "required", message: '@CommonString.WareHouseNameRequired' },
                            { validator: "maxLength", message: '@string.Format(CommonString.WareHouseNameLength, 100)', param: 100 }
                        ]
                    },
                    {
                        name: "Address", title: "Địa chỉ", type: "text", width: 300, filtering: false, validate: {
                            validator: "maxLength", message: '@string.Format(CommonString.WareHouseAddressLength, 255)', param: 255
                        }
                    },
                    {
                        name: "Description", title: "Mô tả", type: "text", width: 300, filtering: false, validate: {
                            validator: "maxLength", message: '@string.Format(CommonString.WareHouseDescriptionLength, 255)', param: 255
                        }
                    },
                    { name: "Inactive", title: "Ngừng kích hoạt", type: "checkbox", width: 100, validate: "required" },
                    { type: "control"}
                ]
            });
        });
    </script>
}

